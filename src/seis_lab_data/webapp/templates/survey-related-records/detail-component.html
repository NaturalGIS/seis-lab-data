{% import "macros.html" as macros %}
<div class="row mb-3">
        {% if permissions.can_update %}
            <div class="col">
                <button
                        class="btn btn-outline-primary"
                        data-on:click="@get('{{ url_for("survey_related_records:get_update_form", survey_related_record_id=survey_related_record.id) }}')"
                        aria-label="update-record"
                >{{ _("edit survey-related record") | capitalize }}
                </button>
                <div class="spinner-border spinner-border-sm ms-3" role="status" aria-hidden="true"
                     data-attr:hidden="!$deleting">
                    <span class="visually-hidden">{{ _("Loading...") }}</span>
                </div>
            </div>
        {% endif %}
    <div class="col" data-signals:deleting="false">
        {% if permissions.can_delete %}
            {{ macros.render_delete_item_button(
            deletion_url=url_for("survey_related_records:detail", survey_related_record_id=survey_related_record.id),
            signal_name="deleting",
            idle_message="delete survey-related record",
            running_message="deleting survey-related record...",
            generated_csrf_token=csrf_token(request),
            modal_dialog_title=_("delete survey-related record"),
            modal_dialog_confirmation_text=_("are you sure you want to delete this survey-related record?")
            ) }}
        {% endif %}
    </div>
</div>

<div class="row">
    <div class="col">
        <h2>{{ _("properties") | capitalize }}</h2>
        <dl class="row">
            <dt class="col-sm-3">{{ _("Name") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.name|translate_localizable_string }}</dd>
            <dt class="col-sm-3">{{ _("Description") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.description|translate_localizable_string }}</dd>
            <dt class="col-sm-3">{{ _("Dataset category") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.dataset_category.name|translate_localizable_string }}</dd>
            <dt class="col-sm-3">{{ _("Domain type") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.domain_type.name|translate_localizable_string }}</dd>
            <dt class="col-sm-3">{{ _("Workflow stage") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.workflow_stage.name|translate_localizable_string }}</dd>
            <dt class="col-sm-3">{{ _("Status") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.status|translate_enum }}</dd>
            <dt class="col-sm-3">{{ _("Is valid") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.is_valid }}</dd>
            <dt class="col-sm-3">{{ _("Survey mission") }}</dt>
            <dd class="col-sm-9"><a
                    href="{{ url_for('survey_missions:detail', survey_mission_id=survey_related_record.survey_mission.id) }}">{{ survey_related_record.survey_mission.name|translate_localizable_string }}</a>
            </dd>
            <dt class="col-sm-3">{{ _("Project") }}</dt>
            <dd class="col-sm-9"><a
                    href="{{ url_for('projects:detail', project_id=survey_related_record.survey_mission.project.id) }}">{{ survey_related_record.survey_mission.project.name|translate_localizable_string }}</a>
            </dd>
            <dt class="col-sm-3">{{ _("Relative path") }}</dt>
            <dd class="col-sm-9">{{ survey_related_record.relative_path }}</dd>
        </dl>
    </div>
</div>

<div class="row">
    <div class="col">
        <h2>{{ _("links") | capitalize }}</h2>
        {% for link in survey_related_record.links %}
            <dl class="row">
                <dt class="col-sm-3">{{ _("url") | capitalize }}</dt>
                <dd class="col-sm-9"><a href="{{ link.url }}" rel="{{ link.relation }}" target="_blank"
                                        type="{{ link.media_type }}">{{ link.url }}</a></dd>
                <dt class="col-sm-3">{{ _("description") | capitalize }}</dt>
                <dd class="col-sm-9">{{ link.link_description |translate_localizable_string }}</dd>
                <dt class="col-sm-3">{{ _("media type") | capitalize }}</dt>
                <dd class="col-sm-9">{{ link.media_type }}</dd>
            </dl>
        {% else %}
            {{ _("no links found") | capitalize }}
        {% endfor %}
    </div>
</div>

<div class="row">
    <div class="col">
        <h2>{{ _("assets") | capitalize }}</h2>
        {% for asset in survey_related_record.record_assets %}
            <dl class="row">
                <dt class="col-sm-3">{{ _("Name") }}</dt>
                <dd class="col-sm-9">{{ asset.name|translate_localizable_string }}</dd>
                <dt class="col-sm-3">{{ _("Description") }}</dt>
                <dd class="col-sm-9">{{ asset.description|translate_localizable_string }}</dd>
                <dt class="col-sm-3">{{ _("Is valid") }}</dt>
                <dd class="col-sm-9">{{ asset.is_valid }}</dd>
            </dl>
        {% else %}
            {{ _("No assets found") }}
        {% endfor %}
    </div>
</div>
