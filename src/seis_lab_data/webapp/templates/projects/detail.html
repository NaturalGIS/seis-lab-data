{% extends "base.html" %}
{% block content %}
    <h1 class="display-1">{{ item.name|translate_localizable_string }}</h1>
    <div class="row">
        <div class="col">
            {% if user_can_create_survey_mission %}
                <a class="btn btn-primary" href="{{ url_for('projects:create_survey_mission', project_slug=item.slug) }}">{{ _("New survey mission") }}</a>
            {% endif %}
        </div>
    </div>
    <div id="feedback" data-signals-deleting="false">
        <ul></ul>
    </div>
    <div class="row mb-3">
        <div class="col">
            {% if user_can_delete %}
                <button
                        class="btn btn-danger"
                        data-bs-toggle="modal"
                        data-bs-target="#delete-project-modal"
                        data-attr-disabled="$deleting"
                        data-text="$deleting ? '{{ _('Deleting project...') }}' : '{{ _('delete project...') }}'"
                >
                </button>
                <div class="spinner-border spinner-border-sm ms-3" role="status" aria-hidden="true" data-attr-hidden="!$deleting">
                    <span class="visually-hidden">{{ _("Loading...") }}</span>
                </div>
            {% endif %}
        </div>
    </div>
    <ul class="nav nav-tabs" id="item-detail" role="tablist">
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link active"
                    id="properties-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#properties-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="properties-tab-pane"
                    aria-selected="true"
            >{{ _("Properties") }}</a>
        </li>
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link"
                    id="links-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#links-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="links-tab-pane"
                    aria-selected="false"
            >{{ _("Links") }}</a>
        </li>
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link"
                    id="survey-missions-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#survey-missions-tab-pane"
                    type="button"
                    role="tab"
                    aria-controls="survey-missions-tab-pane"
                    aria-selected="false"
            >{{ _("Survey missions") }}</a>
        </li>
    </ul>
    <div class="tab-content" id="tab-content">
        <div
                class="tab-pane fade show active"
                id="properties-tab-pane"
                role="tabpanel"
                aria-labelledby="properties-tab"
                tabindex="0"
        >
            <dl class="row">
                <dt class="col-sm-3">{{ _("Name") }}</dt>
                <dd class="col-sm-9">{{ item.name|translate_localizable_string|default(_("name not available"), True) }}</dd>
                <dt class="col-sm-3">{{ _("Description") }}</dt>
                <dd class="col-sm-9">{{ item.description|translate_localizable_string|default(_("description not available"), True) }}</dd>
                <dt class="col-sm-3">{{ _("Status") }}</dt>
                <dd class="col-sm-9">{{ item.status.value }}</dd>
                <dt class="col-sm-3">{{ _("Is valid") }}</dt>
                <dd class="col-sm-9">{{ item.is_valid }}</dd>
                <dt class="col-sm-3">{{ _("Root path") }}</dt>
                <dd class="col-sm-9">{{ item.root_path|default(_("root path not available"), True) }}</dd>
            </dl>
        </div>
        <div
                class="tab-pane fade"
                id="links-tab-pane"
                role="tabpanel"
                aria-labelledby="links-tab"
                tabindex="0"
        ></div>
        <div
                class="tab-pane fade"
                id="survey-missions-tab-pane"
                role="tabpanel"
                aria-labelledby="survey-missions-tab"
                tabindex="0"
        >
            {% with items = survey_missions.survey_missions %}
                {% include "survey-missions/list-component.html" %}
            {% endwith %}
        </div>
    </div>
    <div
            id="delete-project-modal"
            class="modal fade"
            tabindex="-1"
            aria-labelledby="delete-project-modal-label"
            aria-hidden="true"
    >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="delete-project-modal-label">{{ _("Delete project") }}</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label={{ _("Close") }}></button>
            </div>
            <div class="modal-body">
                {{ _("Are you sure you want to delete this project?") }}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{{ _("Cancel") }}</button>
                <button
                        type="button"
                        class="btn btn-danger"
                        data-on-click="@delete('{{ url_for('projects:detail', project_slug=item.slug) }}')"
                        data-indicator="deleting"
                        data-bs-dismiss="modal"
                >{{ _("Delete project") }}</button>
            </div>
        </div>
    </div>
{% endblock %}
